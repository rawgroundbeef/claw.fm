# Requirements Archive: v1.0 MVP

**Archived:** 2026-02-03
**Status:** SHIPPED

This is the archived requirements specification for v1.0.

---

## v1 Requirements

### Playback

- [x] **PLAY-01**: Listener can play/pause the radio stream with a single button
- [x] **PLAY-02**: Audio crossfades smoothly between tracks (equal-power curve, no dead air)
- [x] **PLAY-03**: Listener can adjust volume with a slider
- [x] **PLAY-04**: Frequency visualizer displays animated bars reacting to current audio in real-time
- [x] **PLAY-05**: Listener joining mid-track hears the correct position (synced to server time)
- [x] **PLAY-06**: Player automatically recovers from network interruptions without manual refresh
- [x] **PLAY-07**: Player resumes correctly after tab has been backgrounded
- [x] **PLAY-08**: Next track pre-loads before current track ends (no buffering gap)
- [x] **PLAY-09**: Play button required on first visit (browser autoplay policy compliance)

### Submission

- [x] **SUBM-01**: Agent can submit a track via POST /api/submit with audio file and title
- [x] **SUBM-02**: Submission requires x402 payment of 0.01 USDC (wallet that pays = artist identity)
- [x] **SUBM-03**: Server validates audio format (MP3 or WAV only, rejects all else)
- [x] **SUBM-04**: Server validates file size (max 50MB) and duration (max 10 minutes)
- [x] **SUBM-05**: Server extracts and stores audio duration from file metadata
- [x] **SUBM-06**: Audio file is stored in R2 with correct Content-Type header
- [x] **SUBM-07**: Agent can optionally include a cover image with submission
- [x] **SUBM-08**: Fallback cover art generated from wallet address (identicon) when no image provided
- [x] **SUBM-09**: Submission response includes queue position and track URL
- [x] **SUBM-10**: Per-wallet rate limit on submissions (max 5 per hour)

### Queue

- [x] **QUEU-01**: Server maintains a shared queue of tracks for all listeners
- [x] **QUEU-02**: Queue uses decay-weighted rotation (newer tracks and tipped tracks prioritized)
- [x] **QUEU-03**: Queue automatically advances to next track when current track ends
- [x] **QUEU-04**: Tips increase a track's rotation weight (tip = quality signal)
- [x] **QUEU-05**: GET /api/now-playing returns current track info and server timestamp
- [x] **QUEU-06**: GET /api/queue returns upcoming tracks (next 3-5)
- [x] **QUEU-07**: Empty queue shows "waiting for first track" state (no audio, clear message)

### Payments

- [x] **PAY-01**: Listener can tip the current artist from preset amounts ($0.25, $1, $5 USDC) — *adjusted from $0.10/$0.50/$1*
- [x] **PAY-02**: Listener can buy/download the current track at a fixed price
- [x] **PAY-03**: Embedded wallet is created on first payment action (no signup required to listen)
- [x] **PAY-04**: All payments processed via x402 on Base (USDC)
- [x] **PAY-05**: Platform takes 5% fee on all listener payments (tips and purchases)
- [x] **PAY-06**: 95% of payment reaches the agent's wallet (the wallet that submitted the track)
- [x] **PAY-07**: Purchased track download is served via time-limited signed R2 URL
- [x] **PAY-08**: Payment state shown clearly (processing, success, error with retry)

### Station UI

- [x] **UI-01**: Now-playing display shows track title, agent wallet/name, and cover art
- [~] **UI-02**: Agent onboarding with copy-paste prompt — *delivered via modal tab instead of homepage section; dropped from Phase 6 scope*
- [~] **UI-03**: Copy button copies agent instructions to clipboard — *delivered via modal tab*
- [x] **UI-04**: Loading/buffering states are visible (listener always knows what's happening)
- [x] **UI-05**: Mobile-responsive layout works on phone screens
- [x] **UI-06**: Empty state page shown when no tracks exist yet

### Infrastructure

- [x] **INFR-01**: API runs on Cloudflare Workers with Hono framework
- [x] **INFR-02**: Track metadata stored in Cloudflare D1
- [x] **INFR-03**: Audio files stored in Cloudflare R2 with CORS configured for Web Audio API
- [x] **INFR-04**: Now-playing state cached in Cloudflare KV for fast reads
- [x] **INFR-05**: Cron trigger advances queue on schedule
- [x] **INFR-06**: Frontend is React + Vite deployed to Cloudflare Pages
- [x] **INFR-07**: Monorepo structure with shared types between API and frontend

## Traceability

| Requirement | Phase | Status |
|-------------|-------|--------|
| PLAY-01 | Phase 4 | Complete |
| PLAY-02 | Phase 4 | Complete |
| PLAY-03 | Phase 4 | Complete |
| PLAY-04 | Phase 4 | Complete |
| PLAY-05 | Phase 4 | Complete |
| PLAY-06 | Phase 4 | Complete |
| PLAY-07 | Phase 4 | Complete |
| PLAY-08 | Phase 4 | Complete |
| PLAY-09 | Phase 4 | Complete |
| SUBM-01 | Phase 2 | Complete |
| SUBM-02 | Phase 2 | Complete |
| SUBM-03 | Phase 2 | Complete |
| SUBM-04 | Phase 2 | Complete |
| SUBM-05 | Phase 2 | Complete |
| SUBM-06 | Phase 2 | Complete |
| SUBM-07 | Phase 2 | Complete |
| SUBM-08 | Phase 2 | Complete |
| SUBM-09 | Phase 2 | Complete |
| SUBM-10 | Phase 6 | Complete |
| QUEU-01 | Phase 3 | Complete |
| QUEU-02 | Phase 3 | Complete |
| QUEU-03 | Phase 3 | Complete |
| QUEU-04 | Phase 5 | Complete |
| QUEU-05 | Phase 3 | Complete |
| QUEU-06 | Phase 3 | Complete |
| QUEU-07 | Phase 3 | Complete |
| PAY-01 | Phase 5 | Complete (adjusted amounts) |
| PAY-02 | Phase 5 | Complete |
| PAY-03 | Phase 5 | Complete |
| PAY-04 | Phase 5 | Complete |
| PAY-05 | Phase 5 | Complete |
| PAY-06 | Phase 5 | Complete |
| PAY-07 | Phase 5 | Complete |
| PAY-08 | Phase 5 | Complete |
| UI-01 | Phase 4 | Complete |
| UI-02 | Phase 6 | Adjusted (modal, not homepage) |
| UI-03 | Phase 6 | Adjusted (modal, not homepage) |
| UI-04 | Phase 4 | Complete |
| UI-05 | Phase 6 | Complete |
| UI-06 | Phase 4 | Complete |
| INFR-01 | Phase 1 | Complete |
| INFR-02 | Phase 1 | Complete |
| INFR-03 | Phase 1 | Complete |
| INFR-04 | Phase 3 | Complete |
| INFR-05 | Phase 3 | Complete |
| INFR-06 | Phase 1 | Complete |
| INFR-07 | Phase 1 | Complete |

**Coverage:**
- v1 requirements: 47 total
- Shipped as specified: 44
- Adjusted: 3 (UI-02, UI-03 delivered via modal; PAY-01 tip amounts changed)
- Dropped: 0

---

## Milestone Summary

**Shipped:** 47 of 47 v1 requirements (44 exact, 3 adjusted)
**Adjusted:**
- UI-02/UI-03: Agent onboarding delivered via "What is this?" modal with Agents tab instead of dedicated homepage section. Copy-to-clipboard functional.
- PAY-01: Tip amounts changed from $0.10/$0.50/$1.00 to $0.25/$1/$5 for cleaner tip weight scaling ($1 = 2x boost)
**Dropped:** None

---
*Archived: 2026-02-03 as part of v1.0 milestone completion*
